---
title: mysql 进阶（2）影响 mysql 性能的因素 (1)
top: 1
date: 2016-05-11 15:01:27
tags: ["mysql"]
categories: "mysql"
---

## 服务器硬件

### CPU

- 64 位 CPU 工作在 64 位系统下

- 是否是 CPU 密集型（更好的 CPU）
**mysql 不支持多 CPU 对同一 SQL 并发处理**
- 系统并发吞吐量（更多 CPU）
**web 应用 CPU 数量比质量更重要**
- mysql 版本支持

### 内存

- 越大越好
- 有性能瓶颈
- 频率越高速度越快
- 组成购买升级：相同品牌、颗粒、频率、电压、校验技术和型号
- 单条容量尽可能大

### 磁盘

#### 传统机器磁盘

##### 特点

- 价格低
- 存储空间大
- 读写较慢
- 使用最多，最常见

##### 读取数据过程

- 移动磁头到磁盘表面的正确位置
- 等待磁盘旋转，使所需数据在磁头下面
- 等待磁盘旋转，所有所需数据被磁头读出

##### 如何选择

- 存储容量
- 传输速度
- 访问时间
- 主轴转速
- 物理尺寸

#### RAID 增强传统机器磁盘性能

- RAID 是磁盘冗余队列简称，把多个容量较小的磁盘组成一组容量更大的磁盘，并提供数据冗余来保证数据完整性的技术

##### RAID0

- 提高整个磁盘性能和吞吐量
- 只需要两个以上的硬盘，最简单，成本低
- 没有提供冗余或错误修复能力

##### RAID1

- 把一个磁盘的数据镜像写到另一个磁盘
- 不影响性能情况下最大限度保证系统可靠性和可修复性

##### RAID5

- 通过分布式奇偶校验块把数据分散到多个磁盘
- 任何一个盘数据失效可以从奇偶校验块重建

##### RAID10

- 先对磁盘做 RAID1 之后对两组 RAID1 的磁盘再做 RAID0，
- 读写都有良好的性能

|等级|特点|是否冗余|盘数|读|写|
|RAID0|便宜，快速，危险|否|N|快|快|
|RAID1|高速读，简单，安全|有|2|快|快|
|RAID5|安全，成本折中|有|N+1|快|取决于最慢的盘|
|RAID10|贵，快速，安全|有|2N|快|快|

#### 固态存储 SSD 和 PCI-E 卡

- 适用于存在大量随机 IO 场景
- 解决单线程负载的 IO 瓶颈

##### 固态硬盘特点

- 相比机械磁盘更好的随机读写性能
- 支持更好的并发
- 更容易损坏

##### SSD

- 使用 SATA 接口可以替换传统磁盘
- 同样支持 RAID 技术

##### PCI-E

- 无法使用 SATA 接口，需要独特驱动和配置
- 价格比 SSD 贵，性能更好

#### 网络存储 NAS 和 SAN

- 是两种外部文件存储设备加载到服务器的方法
- SAN 通过光纤连接到服务器，设备通过块接口访问满腹委屈可以将其当做硬盘使用
- NAS 使用网络连接，通过基于文件的协议如 NFS 或 SMB 来访问
- 用于数据库备份

### 网络 /IO 资源

- 网络带宽造成的延迟
- 网络质量对性能的影响

#### 解决方式

- 采用高性能和高带宽的网络接口设备和交换机
- 对多个网卡进行绑定，增强可用性和带宽
- 尽可能进行网络隔离

## 欢迎扫描下方二维码，[个人博客](https://www.phpst.cn)，持续关注：

![](https://ww1.sinaimg.cn/large/a616b9a4gy1g4xzv954a4j20760763yo.jpg)

互联网工程师（id:phpstcn），我们一起学习，一起进步
