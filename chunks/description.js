import{d as defaultLocale}from"./config.js";import MarkdownIt from"markdown-it";const parser=new MarkdownIt,isCJKLang=e=>["zh","zh-tw","ja"].includes(e),EXCERPT_LENGTHS={list:{cjk:120,other:240},meta:{cjk:120,other:240},og:{cjk:70,other:140},rss:{cjk:70,other:140}};function generateExcerpt(e,r,t){if(!e)return"";const a=isCJKLang(t)?EXCERPT_LENGTHS[r].cjk:EXCERPT_LENGTHS[r].other,n=parser.render(e).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&nbsp;/g," ").replace(/\s+/g," "),c=n.slice(0,a).trim();return n.length>a?`${c}...`:c}function generateDescription(e,r){if(e.data.description)return e.data.description;const t=e.data.lang&&""!==e.data.lang?e.data.lang:defaultLocale;return generateExcerpt(e.body||"",r,t)}export{generateDescription as g};